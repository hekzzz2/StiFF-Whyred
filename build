#!/bin/bash

export KERNELNAME=Muadz 

export LOCALVERSION=V69

export KBUILD_BUILD_USER=Muadz

export KBUILD_BUILD_HOST=paokzzz

export TOOLCHAIN=clang

export DEVICES=whyred

source helper

gen_toolchain

send_msg "Start building..."

START=$(date +"%s")

for i in ${DEVICES//,/ }
do
	build ${i} -OC

	build ${i} -NC
done

send_msg "Build OC..."

git apply oc.patch

for i in ${DEVICES//,/ }
do
	if [ $i == "whyred" ] || [ $i == "tulip" ]
	then
		build ${i} -OC -OC

		build ${i} -OC -NC
	fi
done

END=$(date +"%s")

DIFF=$(( END - START ))

send_msg "Build complete in $((DIFF / 60))m $((DIFF % 60))s"
